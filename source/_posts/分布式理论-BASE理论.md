---
title: 分布式理论-BASE理论
date: 2021-03-02 12:00:00
categories:
  - 理论
  - 分布式理论
tags:
  - BASE理论
author: 长歌
abbrlink: 2139113162
---

{% cq %}
BASE理论时由eBay架构师提出的。BASE是对CAP中一致性和可用性权衡的结果。核心思想时即使无法做到强一致性，但每个应用都可以根据自身特点，采用适当的方式来使系统达到最终一致性
{% endcq %}

<!-- more -->

# BASE理论

## BASE理论简介
BASE理论是Basically Available(基本可用)，Soft State（软状态）和Eventually Consistent（最终一致性）三个短语的缩写。

## BASE理论的内容


### Basically Available（基本可用）

假设系统出现了不可预知的故障时，还是可以当做正常的系统进行使用。只是相比于正常的系统而言有以下不同：
- 响应时间：正常情况下0.5秒给出响应，基本可用的系统可能2秒才返回结果
- 功能： 电商网站大促或秒杀场景下，为了保证购物系统的稳定性，部分消费者可能会被引导到降级页面。

### Soft State（软状态）
软状态是指：允许系统中各节点的数据存在中间状态，并任务该状态不影响系统的整体可用性，即允许系统在多个不同节点的数据副本存在数据延迟

### Eventually Consistent（最终一致性）
系统不可能一直维持软状态，应当在一定时间过后，保证所有副本保持数据一致性，从而达到数据的最终一致性。这个时间期限取决于网络延时、系统负载、数据复制方案设计等因素。实际工程实践中，最终一致性分为5种：

#### 因果一致性（Causal consistency）
节点A在数据更新完成后通知节点B，节点B之后对该数据的查询与修改都是基于A更新后的值。与此同时，和节点A无因果关系的节点C的数据访问规则则不存在这样的限制。

### 读已之所写（Read your writes）
节点A更新一个数据后，它自身总是能访问到自身更新过的最新值，而不会看到旧值。

### 会话一致性（Session consistency）
会话一致性将系统对数据的访问过程框定在了一个会话当中。系统能保证在同一个有效的会话中实现“读之所以写”的一致性。也就是说，执行更新操作后，客户端能够在同一个会话中始终读取到该数据项的最新值。

### 单调读一致性（Monotonic read consistency）
如果客户端从任意一个节点读取到一个数据的某个值后，之后的客户端从系统任意一个节点读取的值都不能比之前读的值更旧

### 单调写一致性（Monotonic write consistency）
一个系统要能够保证来自一个节点的写操作被顺序的执行。

## 结论
总体来说BASE理论面向的是大型高可用、可扩展的分布式系统。与传统ACID特性相反，不同于ACID的强一致性模型，BASE提出通过牺牲强一致性来获得可用性，并允许数据段时间内的不一致，但是最终达到一致状态。同时，在实际分布式场景中，不同业务对数据的一致性要求不一样。因此在设计中，ACID和BASE理论往往又会结合使用。

