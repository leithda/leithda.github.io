---
title: 状态模式
abbrlink: 307019047
categories:
  - 理论
  - 设计模式
tags:
  - 设计模式
author: leithda
date: 2021-05-27 12:50:00
---

{% cq %}

状态模式(State):当一个对象的内在状态改变时允许改变其行为，这个对象看起来像是改变了一个类

{% endcq %}
<!-- More -->

## Class Diagram
![](设计模式-状态模式/状态模式.png)

## Implementation
### 状态接口
```java
public abstract class State {
    protected String desc;
    public abstract void handle(Context context);
    public abstract void display();
}
```

### 具体状态
```java
public class ConcreteStateA extends State {

    {
        desc = "休息中";
    }

    @Override
    public void handle(Context context) {
        System.out.println("当前状态" + desc);
        System.out.println("状态处理，切换工作状态");
        context.setState(new ConcreteStateB());
    }

    @Override
    public void display() {
        System.out.println("状态:" + desc);
    }
}

public class ConcreteStateB extends State {

    {
        desc = "工作中";
    }

    @Override
    public void handle(Context context) {
        System.out.println("当前状态" + desc);
        System.out.println("状态处理，切换工作状态");
        context.setState(new ConcreteStateA());
    }

    @Override
    public void display() {
        System.out.println("状态:" + desc);
    }
}
```

### 使用状态的实例
```java
public class Context {
    private State state;

    public Context(State state) {
        this.state = state;
    }

    public State getState() {
        return state;
    }

    public void setState(State state) {
        this.state = state;
    }

    public void request(){
        state.handle(this);
    }

    public void displayState(){
        state.display();
    }
}
```

### 测试类
```java
public class StateTest {
    @Test
    public void test() throws Exception {
        Context context = new Context(new ConcreteStateA());
        context.displayState();
        context.request();
        context.displayState();
        context.request();
        context.displayState();
    }
}
```

## Example

## Reflence
- [<大话设计模式>](https://book.douban.com/subject/2334288/)
- [设计模式 | 菜鸟教程](https://www.runoob.com/design-pattern/design-pattern-tutorial.html)
- [Github | CyC2018](https://github.com/CyC2018/CS-Notes/blob/master/notes/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%20-%20%E7%9B%AE%E5%BD%95.md)